<div id="full-content-area"
  i18n:domain="zeit.cms">

  <tal:replace replace="resource_library:zeit.content.quiz" />

  <div class="wysiwyg-header">
    <div class="supertitle" tal:content="view/metadata/supertitle" />:
    <div class="title" tal:content="view/metadata/title" />
    <div class="byline" tal:content="view/metadata/byline" />
    <div class="subtitle" tal:content="view/metadata/subtitle" />
  </div>

  <ul>
    <li>
      <a tal:attributes="href string:${context/@@absolute_url}/@@addQuestion.html">
        Add question</a>
    </li>
  </ul>

  <form method="POST"
        tal:attributes="action view/@@absolute_url"
        tal:condition="python:len(context)">
    <p>Questions:</p>

    <ol class="questions" id="sortable-questions">
      <li tal:repeat="question context/values">
        <a tal:attributes="href string:${question/@@absolute_url}/@@edit.html"
           tal:content="question/@@display_title" />
        <input type="hidden" name="__quiz__:list"
               tal:attributes="value question/__name__" />
        <ul>
          <li>
            <a tal:attributes="href string:${question/@@absolute_url}/@@addAnswer.html">
              Add answer</a>
          </li>
        </ul>
        <ol tal:condition="python:len(question)"
            tal:attributes="id string:sortable-answers-${repeat/question/index}"
            class="answers">
          <li tal:repeat="answer question/values">
            <a tal:attributes="href string:${answer/@@absolute_url}/@@edit.html"
               tal:content="answer/@@display_title" />
            <tal:correct condition="answer/correct"
                         i18n:translate="">(correct)</tal:correct>
            <input type="hidden"
                   tal:attributes="name string:${question/__name__}:list;
                                   value answer/__name__" />
          </li>
        </ol>
      </li>
    </ol>

    <input type="submit" name="apply" value="Apply" i18n:attributes="value" />
  </form>
</div>
